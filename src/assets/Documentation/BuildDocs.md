## Angular build 

### Pre-requirements:

```
ng build --prod
```

âœ… This will:

- Minify the code
- Remove unnecessary code (tree shaking)
- Generate hashed file names
- Optimize performance

### Configuration Files

Angular uses the following configuration files:

- angular.json: Build configurations and environments
- tsconfig.json: TypeScript configurations
- package.json: Project dependencies

## Explaination of angular.json file

In an Angular application, the angular.json file is the main configuration file that defines how the Angular CLI should build, serve, and test the application. This file is automatically generated when you create a new Angular app.

Let's assume your app is named myangularapp.

### Structure of angular.json

The file is in JSON format and contains key sections like:

```
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "projects": {
    "myangularapp": {
      "projectType": "application",
      "root": "",
      "sourceRoot": "src",
      "prefix": "app",
      "architect": {
        "build": { },
        "serve": { },
        "test": { },
        "lint": { },
        "e2e": { }
      }
    }
  },
  "defaultProject": "myangularapp"
}
```

### Explanation of Important Sections

#### 1. $schema

Defines the JSON schema for the Angular CLI configuration.

#### 2. version

Specifies the version of the Angular CLI used in the project.

#### 3. projects

Contains project-specific configurations.

Your app name myangularapp will be listed here.

#### 4. root

Defines the folder containing your appâ€™s source code.

Default: "src"

#### 6. prefix

Defines the prefix for component selectors.

Example: <app-header>

Default: "app"

#### 7. architect

This section defines the different build tasks:

- ```build```: Configuration for building the app
- ```serve```: Configuration for serving the app locally
- ```test```: Configuration for running unit tests
- ```lint```: Configuration for linting code
- ```e2e```: Configuration for end-to-end tests

### Example: Build options

```
"build": {
  "builder": "@angular-devkit/build-angular:browser",
  "options": {
    "outputPath": "dist/myangularapp",
    "index": "src/index.html",
    "main": "src/main.ts",
    "polyfills": "src/polyfills.ts",
    "tsConfig": "tsconfig.app.json",
    "assets": [
      "src/favicon.ico",
      "src/assets"
    ],
    "styles": [
      "src/styles.scss"
    ],
    "scripts": []
  }
}

```
#### Explanation:

| Property       | Description |
|------------|-----|
| outputPath| Folder where the build files will be generated  |
| index | Path to the main HTML file |
| main |   Path to the main TypeScript file  |
| assets |  Static assets like images, icons  |
| styles | CSS or SCSS files |
| scripts | External JS files |

### Example: Build configurations

The ```"configurations"``` section in your ```angular.json``` file defines specific build configurations for different environments like **production**, **development**, etc. Let's break down each property in detail for the **production** build configuration you shared.

```
"configurations": {
  "production": {
    "fileReplacements": [
      {
        "replace": "src/environments/environment.ts",
        "with": "src/environments/environment.prod.ts"
      }
    ],
    "optimization": true,
    "outputHashing": "all",
    "sourceMap": false,
    "extractCss": true,
    "namedChunks": true,
    "extractLicenses": true,
    "vendorChunk": false,
    "buildOptimizer": true,
    "budgets": [
      {
        "type": "initial",
        "maximumWarning": "5mb",
        "maximumError": "5mb"
      },
      {
        "type": "anyComponentStyle",
        "maximumWarning": "10kb",
        "maximumError": "25kb"
      }
    ]
  }
}
```

#### Explanation of Each Property


| Property       | Description |
|------------|-----|
| ```fileReplacements```| Replaces the specified file for the production build. Here, ```environment.ts``` is replaced with ```environment.prod.ts```, ensuring production-specific settings (e.g., API endpoints) are used.  |
| ```optimization``` | Enables optimizations like minification and tree-shaking to reduce the final bundle size and improve performance. |
| ```outputHashing``` |  Adds unique hashes to the output file names to ensure proper cache busting. ðŸ”¹ ```"all"``` â†’ Hashes are added to all files (JS, CSS, assets, etc.). |
| ```sourceMap``` |  Disables source maps for production to enhance security and reduce bundle size.  |
| ```extractCss``` | Extracts CSS into separate ```.css``` files instead of keeping them inline in the JavaScript bundle. This improves caching and reduces JS bundle size. |
| ```namedChunks``` | Keeps readable chunk names in the output files to help with debugging and identifying chunks. |
| ```extractLicenses``` | Extracts third-party library licenses into a separate ```3rdpartylicenses.txt``` file for compliance. |
| ```vendorChunk``` | Controls whether Angular separates third-party dependencies (like Angular, RxJS) into a separate ```vendor.js``` file.                  ðŸ”¹ ```false``` â†’ Merges vendor code into the main bundle for improved performance. |
| ```buildOptimizer``` | Optimizes Angular's build by removing unnecessary parts of the framework code, reducing bundle size. |
| ```budgets``` | Enforces size limits for your build to ensure optimal performance and prevent large bundle sizes. |

#### Why Are These Settings Important?

âœ… **Improved Performance**: Optimization, build optimizer, and extracted CSS ensure smaller and faster bundles.

âœ… **Better Caching**: ```outputHashing: "all"``` ensures users always receive the latest files.

âœ… **Enhanced Security**: Disabling source maps in production prevents exposing source code.

âœ… **Compliance**: ```extractLicenses``` ensures legal compliance with third-party libraries.

âœ… **Controlled Size**: The ```budgets``` property ensures your application doesnâ€™t accidentally grow too large.

